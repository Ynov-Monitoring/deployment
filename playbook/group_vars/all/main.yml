---
############
# MAIN VAR #
############
project_tag: default

influxdb_monitoring_db: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          38366461343132306361666638363064333064633332666463323461653438386539316262306363
          3937386333383430396466613765646534616333316463620a383931313730373937383539656230
          36666661663661343934376238623236306232316638363430613363386235386431303438363839
          3464653338393764390a333432326561376336396162653661336461663637623330623531363434
          38373832333166396334376233343231356231356461633236633066323138623932
          
influxdb_telegraf_user: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63343763303362363063666239653161616239303064333236636562643633396639393136313661
          3464666335613135346439663731663862656539316438630a663937663434323439386366373533
          38653839323763336633356533383139343231666633636461393164363465656163333939666633
          6366356637623266360a333462663330336136653139663964656530646565633438623966333231
          39633233363733653061663930613965323136613164623936366537356535306437

influxdb_telegraf_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31393135653839633339626538356462326530666239623039613736306162316232613731366438
          3336663238393938373262643161396534353036383561320a383637373863643837306436323437
          34313663393031356635643734383831353134386462396332653930343930326239383436373231
          3066656163666261330a333662653835616535353162323535326463346365303265316635303936
          61356131663535346261303338643333303233616637656234333962376361323138

############
# TELEGRAF #
############
# doc: https://github.com/manala/ansible-role-telegraf

telegraf_agent_package_method: repo
telegraf_agent_package_state: latest
telegraf_agent_debug: "false"
telegraf_agent_hostname: "{{ ansible_nodename }}"
telegraf_agent_quiet: "true"
#telegraf_win_install_dir: "C:\Telegraf"
#telegraf_win_logfile: "C:\Telegraf\log"
#telegraf_win_include: "C:\Telegraf\plugins"
telegraf_agent_logfile: /var/log/telegraf/telegraf.log
telegraf_agent_interval: "10"
telegraf_agent_flush_interval: "10"

telegraf_global_tags:
  - tag_name: projet
    tag_value: "{{ project_tag }}"

telegraf_agent_output:
  - type: influxdb
    config:
      - urls = ["http://{{ influxdb_ip }}:8086"]
      - database = "{{ influxdb_monitoring_db }}"
      - username = "{{ influxdb_telegraf_user }}"
      - password = "{{ influxdb_telegraf_pass }}"

telegraf_plugins_default:
  - plugin: system
  - plugin: cpu
  - plugin: mem
  - plugin: disk
  - plugin: netstat